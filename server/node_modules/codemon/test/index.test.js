const codemon = require('../lib/codemon')
var pwd = process.cwd();
const path = require('path');


beforeEach(() => {
    // move to the fixtures directory to allow for config loading
    process.chdir(path.resolve(pwd, 'test/fixtures'));  
});
  
afterEach(() => {
    process.chdir(pwd);
});
  


test('adds 1 + 2 to equal 3', () => {
    expect((1+2)).toBe(3);
});

function sayHello () { console.log('Hello!') }

test('sayHello prints "Hello!"', () => {
    const log = jest.spyOn(global.console, 'log')
    sayHello()
    expect(log).toHaveBeenCalledWith('Hello!')
})


test('codemon1', () => {
    const log = jest.spyOn(global.console, 'log')
    function callback() {
        codemon()
        expect(log).toHaveBeenCalledWith('Hello!')
        done()
    }

    fetchData(callback)
});